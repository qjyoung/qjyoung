<html lang="en">
<head>
    <meta charSet="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <meta name="keywords" content="Á®ãÂ∫èÂëòÈòøËØ∫,ÈòøËØ∫,ÂÄíËÆ°Êó∂,ÂÄíËÆ°Êó∂ÂàóË°®,ÂÆûÁî®Â∞èÂ∑•ÂÖ∑,È´òËÄÉÂÄíËÆ°Êó∂,Êò•ËäÇ,Êò•ËäÇÂÄíËÆ°Êó∂"/>
    <title>ÂÖ¨‰ºóÂè∑ÔºöÁ®ãÂ∫èÂëòÈòøËØ∫</title>
    <style>
        body {font-family: Tahoma, Verdana, Arial, sans-serif;}  .notice {background: #B4EEB4;position: fixed;border: 1px solid #1a1a1a;border-radius: 5px;z-index: 100;width: auto;height: 30px;text-align: center;font-weight: bold;line-height: 30px;padding: 7px;left: 50%;top: 27%;transform: translate(-50%, -50%);}  a:link, a:visited, a:active {text-decoration: none;color: blue;}  a:hover {text-decoration: underline;}  .board {position: relative;float: left;margin: 5px 17px 5px 17px;padding: 5px 17px 5px 17px;}  .badge {position: absolute;font-size: 17px;width: 23px;height: 23px;line-height: 23px;text-align: center;}  .up {top: -12px;right: -12px;}  .down {bottom: -12px;right: -12px;}  .my-button {position: relative;cursor: pointer;}  .my-button:active {padding-bottom: -1px;}  .item-x {display: none;}  .item:hover > .item-x, .item-x:hover {display: inline-block;}  .group-name {position: relative;}  .group-name:hover {color: transparent;}  .edit {background-color: transparent;display: none;position: absolute;top: 0;margin: 0;padding: 0;width: 100%;height: 100%;font-family: inherit;font-size: inherit;font-weight: bold;border: none;outline: none;}  .group-name:hover .edit {display: block;}  td {padding-left: 5px;}
    </style>
    <script src="x.js"></script>
    <script src="calendar/lunar.js?4"></script>
    <script src="js/vue.min.js"></script>
    <script src="js/bluebird.min.js"></script>
    <script src="js/html2canvas.min.js"></script>

    <script type="text/javascript">
      function notice(message, opts) {
        function destroy() {
          document.body.removeChild(document.getElementById("noticeLayer"));
        }

        function createBtn(parent, title, opt) {
          let btn = document.createElement("button");
          btn.innerText = title;
          btn.style.margin = "2px";
          btn.onclick = opt;
          parent.append(btn)
        }

        if (document.getElementById("noticeLayer") == null) {
          let noticeLayer = document.createElement("div");
          document.body.appendChild(noticeLayer);
          noticeLayer.id = "noticeLayer";
          noticeLayer.setAttribute('class', 'notice');
          noticeLayer.append(message);
          if (opts) {
            noticeLayer.style.height = '60px';
            noticeLayer.append(document.createElement("br"));
            opts.forEach(opt => {
              createBtn(noticeLayer, opt.title, () => {
                opt.handler();
                destroy();
              })
            })
            createBtn(noticeLayer, "ÂèñÊ∂à", () => {
              destroy();
            })
          } else {
            setTimeout(destroy, 1313);
          }
        }
      }

      window.oncontextmenu = function (e) {
        e.preventDefault();
        confirm("Â§á‰ªΩ?") && function () {
          let content = localStorage.getItem(StoreKey.ToolGroups);
          let blob = new Blob([content], {
            type: "text/plain;charset=utf-8"
          });
          let reader = new FileReader();
          reader.readAsDataURL(blob);
          reader.onload = function (e) {
            let a = document.createElement('a');
            a.download = `Â∑•ÂÖ∑Êùø-${new Date().toISOString().replace("T", " ").replace(/\..*/, "")}.json`;
            a.href = e.target.result;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
          }
        }()
      };
      // canvasÁîüÊàêÂõæÁâá
      function screenshot() {
        let content = document.getElementById(StoreKey.Countdown);
        let width = content.offsetWidth;
        let height = content.offsetHeight;

        let canvas = document.createElement("canvas");
        let context = canvas.getContext('2d');
        let backingStore = context.backingStorePixelRatio ||
          context.webkitBackingStorePixelRatio ||
          context.mozBackingStorePixelRatio ||
          context.msBackingStorePixelRatio ||
          context.oBackingStorePixelRatio ||
          context.backingStorePixelRatio || 0.5;
        let scale = (window.devicePixelRatio || 0.5) / backingStore;
        context.scale(scale, scale);

        canvas.width = width * scale;
        canvas.height = height * scale;
        canvas.style.width = width + 'px';
        canvas.style.height = height + 'px';

        let opts = {
          scale: scale,
          canvas: canvas,
          width: width,
          height: height,
          dpi: window.devicePixelRatio
        };
        html2canvas(content, opts).then(function (canvas) {
          context.imageSmoothingEnabled = false;
          context.webkitImageSmoothingEnabled = false;
          context.msImageSmoothingEnabled = false;
          canvas.toBlob(async blob => {
            const data = [
              new ClipboardItem({
                [blob.type]: blob,
              }),
            ];
            await navigator.clipboard.write(data)
              .then(() => {
                  notice('Êà™ÂõæÂ∑≤Â§çÂà∂Âà∞Ââ™ÂàáÊùø');
                }, () => {
                  notice('Êà™ÂõæÂ§±Ë¥•');
                }
              );
          });
        });
      }

      String.prototype.visualLength = function () {
        let ruler = document.getElementById('ruler');
        ruler.innerHTML = this;
        return ruler.offsetWidth;
      }
    </script>
</head>
<body>
<span id="ruler" style="position:absolute;visibility: hidden;"></span>
<template id="group">
    <div>
        <div :style="{backgroundColor:group.background}" class="board item">
            <h1 v-bind:class="!group.custom?'':'group-name'">
                {{ group.name === "" ? "ËØ∑ËæìÂÖ•Ê†áÈ¢ò" : group.name }}
                <input class="edit" placeholder="ËØ∑ËæìÂÖ•Ê†áÈ¢ò" v-if="group.custom" v-model="group.name"/>
            </h1>
            <template v-if="group.groups">
                <list :list="group.groups" v-slot="{item,index}">
                    <draggable :couldplace="item.custom" :draggable="item.custom" :index="index" :item="item" :list="group.groups" :sublist="true" :type="DragType.Group">
                        <group :group="item" :groups="group.groups"></group>
                    </draggable>
                </list>
            </template>
            <template v-else>
                <ol style="margin-bottom: 22px">
                    <list :list="group.tools" v-slot="{item,index}">
                        <draggable :couldPlace="item.custom" :draggable="item.custom" :index="index" :item="item" :list="group.tools" :type="DragType.Tool">
                            <li class="item" style="padding-right: 2px">
                                <a :href="item.url" draggable="false" target="_blank"><span v-html="item.name"></span></a>
                                <span @click="confirm(`Á°ÆÂÆöÂà†Èô§[${item.name}]Ôºü`)&&(item.name=ToDelete)" class="my-button item-x"
                                      style="position: absolute;margin-left: 1px"
                                      v-if="item.custom">‚ùå</span>
                            </li>
                        </draggable>
                    </list>
                </ol>
                <div class="item-x" style="position: absolute;left:20px;width: 92%;bottom: 2px" v-if="group.custom">
                    <input @keyup.enter="newTool(group)" placeholder="ÈìæÊé•" style="width: 40%" v-model="url"/>
                    <input @keyup.enter="newTool(group)" placeholder="ÂêçÁß∞(ÂõûËΩ¶Êñ∞Â¢û)" style="width: 40%" v-model="name"/>
                    <span @click="newTool(group)" class="my-button" style="position: absolute;margin-left: 3px">‚úÖ</span>
                </div>
            </template>
            <div class="badge up item-x" v-if="group.custom">
                <span @click="confirm(`Á°ÆÂÆöÂà†Èô§[${group.name}]Ôºü`)&&(group.name=ToDelete)" class="my-button">‚ùå</span>
            </div>
            <div class="badge down item-x">
                <span @click="newGroup(group)" class="my-button">‚ûï</span>
            </div>
        </div>
    </div>
</template>

<template id="draggable">
    <div :draggable="draggable" @dragover.prevent @dragstart="dragging(event)" @drop="drop(event)">
        <slot></slot>
    </div>
</template>
<template id="list">
    <div>
        <div v-for="(item,index) in list">
            <slot v-bind:index="index" v-bind:item="item"></slot>
        </div>
    </div>
</template>
<div id="app" style="width:100%;height: 100%;">
    <!--countdown-->
    <div class="board item" style="backgroundColor:#fedf55" id="countdown">
        <h1 onclick="screenshot()">ÂÄíËÆ°Êó∂</h1>
        <div style="padding-left: 20px;width: auto;height: auto; font-size:14pt;text-align:center;border:2px solid #0da0ec;">
            <span v-html="formatDate(countdown.date)"></span><br>
            <span v-html="weekday(countdown.date)"></span>
            <span style="color: black; ">{{countdown.time}}</span><br>
            <span style="color: violet; ">{{`${countdown.lunar.chineseYear}„Äê${countdown.lunar.animal}„ÄëÂπ¥ ${countdown.lunar.cyclical(countdown.lunar.months)}Êúà ${countdown.lunar.cyclical(countdown.lunar.days + 1)}Êó•`}}</span><br>
            <span style="color: #000066; ">{{`${countdown.lunar.chineseMonth}Êúà${countdown.lunar.chineseDay}`}}</span><br>
            <span style="background-color:#ccffcc; color:#000066">{{countdown._festivals.join('„ÄÅ')}}</span>
        </div>
        <ol style="margin-bottom: 22px" v-for="each in [holidays, countdown.tools]">
            <li class="item" v-for="item in each" v-if="!item.hide">
                <span :style="[item.descStyle]" style="display:inline-block;">
                    <strong style='color: black' v-html="item.desc"></strong>
                </span>
                <span :style="[item.diffStyle]" style="display:inline-block;">{{item.diffShow}}</span>
                <span v-html="item.time"></span>
                <span @click="!confirm(`Á°ÆÂÆöÂà†Èô§[${item.desc}]Ôºü`)||countdown.tools.splice(countdown.tools.indexOf(item),1)" class="my-button item-x" style="position: absolute;margin-left: 1px"
                      v-if="item.custom">‚ùå</span>
            </li>
        </ol>

        <div class="item-x" style="position: absolute;left:20px;width: 92%;bottom: 2px">
            <input style="width: 40%" placeholder="Êó•Êúü(09-16ÊàñÂÖ´ÊúàÂçÅ‰∫å)" v-model="date" @keyup.enter="newCountdown()"/>
            <input style="width: 40%" placeholder="ÊèèËø∞(ÂõûËΩ¶Êñ∞Â¢û)" v-model="desc" @keyup.enter="newCountdown()"/>
            <span class="my-button" style="position: absolute;margin-left: 3px" @click="newCountdown()">‚úÖ</span>
        </div>
    </div>

    <!--tools-board-->
    <list :list="toolGroups" v-slot="{item,index}">
        <draggable :couldplace="item.custom" :draggable="item.custom" :index="index" :item="item" :list="toolGroups" :sublist="!!item.groups" :type="DragType.Group">
            <group :group="item" :groups="toolGroups"></group>
        </draggable>
    </list>
</div>
</body>
<script>
  function clone(object) {
    let buf;
    if (object instanceof Array) {
      buf = [];
      let i = object.length;
      while (i--) {
        buf[i] = clone(object[i]);
      }
      return buf;
    } else if (object instanceof Object) {
      buf = {};
      for (let k in object) {
        buf[k] = clone(object[k]);
      }
      return buf;
    } else {
      return object;
    }
  }
  const DragType = {Group: 1, Tool: 2};
  const StoreKey = {ToolGroups: "toolGroups", Countdown: "countdown", Readme: "readme", Version: "version"};
  const ToDelete = '$delete';

  let draggingType = null;
  let draggingFromList = null;
  let draggingItem = null;
  let draggingIndex = null;

  let draggable = {
    props: {
      draggable: {},
      sublist: false,
      type: {},
      list: {},
      item: {},
      index: {},
      couldplace: {},
    },
    template: '#draggable',
    methods: {
      clear() {
        draggingType = null;
        draggingFromList = null;
        draggingItem = null;
      },
      dragging(event) {
        event.stopPropagation();

        draggingType = this.type;
        draggingFromList = this.list;
        draggingItem = this.item;
        draggingIndex = this.index;
      },
      drop() {
        if (this.couldplace && draggingType === this.type) {
          if (draggingItem === this.item && draggingIndex === this.index) {
            return
          }
          let inSameList = draggingFromList === this.list;
          let before = inSameList && draggingIndex > this.index;

          let this0 = this;

          function mergeGroups() {
            before = false;
            let _item = clone(this0.item);
            this0.$set(this0.item, 'name', 'ÂêàÂπ∂ÁöÑÁªÑ')
            this0.$set(this0.item, 'custom', true)
            this0.$set(this0.item, 'tools', []);
            this0.$set(this0.item, 'groups', [_item, clone(draggingItem)])

            let base = 138, max = 255 - base;
            let time = new Date().getTime();
            let r = time % max;
            this0.$set(this0.item, 'background', r % 2 === 0 ? colors[Math.ceil(Math.random() * colors.length)]
              : `rgb(${r + base} , ${Math.floor(Math.random() * max) + base} , ${Math.floor(Math.random() * max) + base})`)
            return true;
          }

          let opts = [{
            title: `ÁßªÂä®Âà∞[${this0.item.name}]‰πã${before ? 'Ââç' : 'Âêé'}?`,
            handler: function () {
              this0.list.splice(before ? this0.index : this0.index + 1, 0, clone(draggingItem));
              draggingFromList.splice(before ? draggingIndex + 1 : draggingIndex, 1);
            }
          }, {
            title: 'ÂêàÂπ∂Â∑•ÂÖ∑ÁªÑ?',
            handler: function () {
              mergeGroups();
              draggingFromList.splice(before ? draggingIndex + 1 : draggingIndex, 1);
            }
          }];
          notice('ÈÄâÊã©Êìç‰Ωú', draggingType === DragType.Group ? opts : [opts[0]]);
        }
        if (draggingType >= this.type) {
          event.stopPropagation();
        }
      }
    }
  };

  let list = {
    name: 'list',
    props: {
      list: {},
    },
    template: '#list',
    watch: {
      list: {
        handler(list) {
          if (!list) {
            return;
          }
          for (let i = 0; i < list.length; i++) {
            let item = list[i];
            if (item.name === ToDelete || item.groups && item.groups.length === 0) {
              list.splice(i, 1);
            }
          }
        },
        deep: true
      }
    }
  };
  let group = {
    name: 'group',
    props: {
      group: {},
      groups: []
    },
    data() {
      return {
        name: "",
        url: "",
      }
    },
    template: '#group',
    components: {
      draggable,
      list,
    },
    methods: {
      newGroup(previousGroup) {
        let base = 138, max = 255 - base;
        let time = new Date().getTime();
        let r = time % max;
        this.groups.splice(this.groups.indexOf(previousGroup) + 1, 0, {
          name: "ËØ∑ËæìÂÖ•Ê†áÈ¢ò",
          custom: true,
          background: r % 2 === 0 ? colors[Math.ceil(Math.random() * colors.length)]
            : `rgb(${r + base} , ${Math.floor(Math.random() * max) + base} , ${Math.floor(Math.random() * max) + base})`,
          tools: []
        });
      },
      newTool(group) {
        group.tools.push({name: this.name || '', url: this.url, custom: true})
      },
    }
  };
  let colors = ['AliceBlue', 'AntiqueWhite', 'Aqua', 'Aquamarine', 'Azure', 'Beige', 'Bisque', 'BlanchedAlmond', 'BurlyWood', 'CadetBlue', 'Chartreuse', 'Coral', 'CornflowerBlue', 'Cornsilk', 'Cyan', 'DarkCyan', 'DarkGoldenRod', 'DarkGray', 'DarkKhaki', 'Darkorange', 'DarkSalmon', 'DarkSeaGreen', 'DarkTurquoise', 'DeepPink', 'DeepSkyBlue', 'Feldspar', 'FloralWhite', 'Fuchsia', 'Gainsboro', 'GhostWhite', 'Gold', 'GoldenRod', 'GreenYellow', 'HoneyDew', 'HotPink', 'IndianRed', 'Ivory', 'Khaki', 'Lavender', 'LavenderBlush', 'LawnGreen', 'LemonChiffon', 'LightBlue', 'LightCoral', 'LightCyan', 'LightGoldenRodYellow', 'LightGrey', 'LightGreen', 'LightPink', 'LightSalmon', 'LightSeaGreen', 'LightSkyBlue', 'LightSlateGray', 'LightSteelBlue', 'LightYellow', 'Lime', 'LimeGreen', 'Linen', 'Magenta', 'MediumAquaMarine', 'MediumOrchid', 'MediumPurple', 'MediumSeaGreen', 'MediumSpringGreen', 'MediumTurquoise', 'MediumVioletRed', 'MintCream', 'MistyRose', 'Moccasin', 'NavajoWhite', 'OldLace', 'Olive', 'OliveDrab', 'Orange', 'OrangeRed', 'Orchid', 'PaleGoldenRod', 'PaleGreen', 'PaleTurquoise', 'PaleVioletRed', 'PapayaWhip', 'PeachPuff', 'Peru', 'Pink', 'Plum', 'PowderBlue', 'Red', 'RosyBrown', 'Salmon', 'SandyBrown', 'SeaGreen', 'SeaShell', 'Silver', 'SkyBlue', 'SlateGray', 'Snow', 'SpringGreen', 'SteelBlue', 'Tan', 'Teal', 'Thistle', 'Tomato', 'Turquoise', 'Violet', 'VioletRed', 'Wheat', 'White', 'WhiteSmoke', 'Yellow', 'YellowGreen',];
  new Vue({
    el: '#app',
    components: {
      group,
      list,
      draggable,
    },
    data: {
      toolGroups: [{
        name: "ÂÖ¨‰ºóÂè∑-Á®ãÂ∫èÂëòÈòøËØ∫",
        background: "pink",
        tools: [{
          url: "https://qjyoung.github.io/",
          name: 'Êâ´Á†ÅÂÖ≥Ê≥®&nbsp;<img src="./qrcode.png" alt="ÂÖ¨‰ºóÂè∑ÔºöÁ®ãÂ∫èÂëòÈòøËØ∫" style="width: 90px;height: 90px"/>',
        },
          {url: 'https://github.com/qjyoung', name: 'github'},
          {url: '', name: ''},
          {url: 'https://v.qq.com/x/page/n0536o6npn5.html', name: 'Ë∏©ÁùÄÂçïËΩ¶ÂéªÊãâËê®'},
          {url: '', name: ''},
          {url: 'https://mp.weixin.qq.com/s/QaU5B0m4Oo-hhIigu10ehg', name: 'ÂåóÁñÜ2872ÂÖ¨Èáå‰πãÊóÖ'},
          {url: 'https://mp.weixin.qq.com/s/HARgAEd3G36cMgioiwA04A', name: 'Ë•øËóèÔºåÈ≠ÇÂΩí‰πãÂú∞'},
          {url: '', name: ''},
          {url: 'https://mp.weixin.qq.com/s/aXaQD0xJem63rLSPtwsBWQ', name: 'qjy-geth v0.3, ÊîØÊåÅ‰∏ä‰º†abiÔºåËÆ©‰∫§ÊòìËá™Â∑±ÂºÄÂè£ËØ¥ËØù'},
          {url: 'https://mp.weixin.qq.com/s/JpqA_ygEYDKHZiTm7fgQkw', name: 'qjy-geth v0.2, ÊîØÊåÅÂú∞ÂùÄÂà´Âêç'},
          {url: 'https://mp.weixin.qq.com/s/3k-cGz0gt64ULGdm7FwrvQ', name: '666ÔºÅËøòÊúâÊØîËøôÊõ¥Â•ΩÁî®ÁöÑ‰ª•Â§™ÂùäÊµãËØïËäÇÁÇπÂêó'},
          {url: 'https://mp.weixin.qq.com/s/MAbFOeiZEVMiAfgzFlUL9g', name: 'ÂõûÈ°æÁªèÂÖ∏ÊéíÂ∫èÁÆóÊ≥ï'},
          {url: 'https://mp.weixin.qq.com/s/6yLwK5OLOFZ9tWSBVUGv2w', name: 'ÁôΩÂ´ñApple OCRÊñáÂ≠óËØÜÂà´'},
          {url: 'https://mp.weixin.qq.com/s/32WFce0eQHZacG26k6D-Iw', name: 'ËÆ©‰ª•Â§™ÂùägethÊîØÊåÅhardhat consoleÊó•Âøó'},
          {url: 'https://mp.weixin.qq.com/s/ts-B-W2sj7ciaz9L7pfmDw', name: '‰ªé‰∏ÄÊ¨°JVMÂÜÖÂ≠òÊ≥ÑÈú≤ËØ¥Ëµ∑'},
          {url: 'https://mp.weixin.qq.com/s/51b7n81DxyRjVoyyi2U-tA', name: 'Áî®vueÂÜô‰∏Ä‰∏™ÂÇªÁìúÂºèÂÄíËÆ°Êó∂ÂàóË°®'},
          {url: 'https://mp.weixin.qq.com/s/UhyQ5lnaqfV0i-O90OEQEw', name: 'gitË°•‰∏ÅÁöÑÂ¶ôÁî®ÔºåÂ∞Ü‰ª£Á†ÅÂ∑ÆÂºÇÂåñÂèëÂ∏ÉÂà∞Â§ñÁΩëgithub'},
          {url: 'https://mp.weixin.qq.com/s/WSEz9CdUze8RNppATl6_kw', name: 'ËøôÊàñËÆ∏ÊòØÂ∞ÅË£ÖÁöÑÊúÄ‰ºòÈõÖÁöÑExcelÊï∞ÊçÆÂØºÂá∫Â∑•ÂÖ∑'},
          {url: 'https://mp.weixin.qq.com/s/gf5G484F_Jbi0Ppwyzaq-w', name: 'Á©∂ÊûÅÊïàÁéáÔºå‰∏ÄË°åsqlÊãøÂà∞ÂÖ®ÊµÅÁ®ãÊµãËØïÊï∞ÊçÆ'},
          {url: 'https://mp.weixin.qq.com/s/X1R4ozZ_QmZZHa_2kCt0KA', name: 'ÂèóÂÆ†Ëã•ÊÉäÔºåÁ´üË¢´DDoSÊîªÂáª‰∫Ü'},
          {url: 'https://mp.weixin.qq.com/s/gttv67UBfCn-JapSfzHMlA', name: 'ÂïÜÂüé‰∏ãÂçï-‰∏âÊñπÊîØ‰ªò-Êó∂Â∫èÂõæ'},
          {url: 'https://mp.weixin.qq.com/s/ZlK9vPLLkNFP73TPDrth5A', name: 'ÂÄüÂä©lambdaÁÅµÊ¥ªÊéßÂà∂‰∫ãÁâ©Á≤íÂ∫¶'},
          {url: 'https://mp.weixin.qq.com/s/nbzWbws4o53tO42WZMFynA', name: 'Ê≥®Ëß£„ÄÅ‰ª£ÁêÜÁÆÄÂåñredisÂàÜÂ∏ÉÂºèÈîÅ-ÂÆûÁé∞‰ª£Á†Å'},
          {url: 'https://mp.weixin.qq.com/s/ycdvhfzIP6Y_CpskCyrQmQ', name: 'ÈÄöÁî®ÁöÑÂå∫ÂùóÈìæÊô∫ËÉΩÂêàÁ∫¶web3.goË∞ÉÁî®ÊúçÂä°'},
          {url: 'https://mp.weixin.qq.com/s/KJv8m_1exKeMEU__pGR4Ug', name: 'dockerÂø´ÈÄüÊê≠Âª∫elk-2-Ëß£ÊûêJava„ÄÅgo„ÄÅnginxÊó•Âøó'},
          {url: 'https://mp.weixin.qq.com/s/hoOZqeHwkvwWyP8BhCKP7Q', name: 'Git Â§ö‰∫∫Âçè‰ΩúÔºåËØ∏Ëëõ‰∫ÆÂ∏¶‰Ω†Áé©ËΩ¨cherry-pick „ÄÅrebase'},
          {url: 'https://mp.weixin.qq.com/s/ZrDaT1kMT30EDqBLi28lUA', name: 'Á≤æÁÆÄÁâà-‰∫îÈ¢úÂÖ≠Ëâ≤ÁöÑÂ∏∏Áî®Â∑•ÂÖ∑Êùø-Âü∫‰∫éVue'},
          {url: 'https://mp.weixin.qq.com/s/fc9O0Yow6YQrhPepmCVHAw', name: 'SQLÊü•ÁúãÊï∞ÊçÆ - ÂÄüÂä©view„ÄÅgroup_concatËäÇÁúÅ‰Ω†ÂÆùË¥µÊó∂Èó¥'},
          {url: 'https://mp.weixin.qq.com/s/dunLcQ8O1gfwAf6jb4S1mA', name: 'Áî®VUEÂÅö‰∏Ä‰∏™Â∏∏Áî®Â∑•ÂÖ∑Êùø'},
          {url: 'https://mp.weixin.qq.com/s/IkQVKnA-iHG_fyJ0EDO9PQ', name: 'Ë¢´Â∑•ÂÖ∑ÔºàGolandÔºâÂùëÁöÑÊúÄÊÉ®ÁöÑ‰∏ÄÊ¨°'},
          {url: 'https://mp.weixin.qq.com/s/45zu-OcP5UNbLdj5X3hUwA', name: 'ÂÅö‰∏Ä‰∏™‰ºöÂÅ∑ÊáíÁöÑÁ®ãÂ∫èÂëò'},
          {url: 'https://mp.weixin.qq.com/s/VJIFYZchRjEzC2bzVladmw', name: 'ideaÂÆöÂà∂groovyËÑöÊú¨ÔºåÂØºÂá∫dbÊï∞ÊçÆÂà∞csvËá™Âä®Âä†Ë°åÂè∑ÂíåÊ†áÈ¢ò'},
          {url: 'https://mp.weixin.qq.com/s/rn2IbAWIpRVRE631hPNUfg', name: '60Ë°åshellËÑöÊú¨Âø´ÈÄüÁîüÊàêJavaÈ°πÁõÆËÑöÊâãÊû∂'},
          {url: 'https://mp.weixin.qq.com/s/iDA08QqL9xp3eo5znjWleA', name: 'Áî®dockerÂø´ÈÄüÊê≠Âª∫elkÊó•ÂøóÂπ≥Âè∞'},
          {url: 'https://mp.weixin.qq.com/s/1m7OKcqOcB2e_2K_mFG_8A', name: '50Ë°ågoÂÆûÁé∞treeÂëΩ‰ª§'},
          {url: 'https://mp.weixin.qq.com/s/EgE_sF8xmDfrkkX_zsdycA', name: 'ÈîôÊÄ™Mybatis, ÂéüÊù•ËøôÂπ∂‰∏çÊòØbug'},
          {url: 'https://mp.weixin.qq.com/s/h-ZrmzfRjhdsxfZneMyvuw', name: 'Ê≥®Ëß£+‰ª£ÁêÜ Âä†ÊåÅÂàÜÂ∏ÉÂºèÈîÅÔºåËÆ©‰ª£Á†ÅÊõ¥ÁÆÄÊ¥Å'},
          {url: 'https://mp.weixin.qq.com/s/kuJnTjMxdPv32E7a-r-zRQ', name: 'DIYÊèí‰ª∂ÔºåËá™Âä®ÁîüÊàêsetË∞ÉÁî®ÔºåËß£ÊîæÂèåÊâã'},
          {url: 'https://mp.weixin.qq.com/s/zm-f6ENkt93dU53K2mNVZg', name: 'JavaÂõûË∞É„ÄÅLambda‰∏éRedisÂàÜÂ∏ÉÂºèÈîÅÊñ∞Áé©Ê≥ï'},
          {url: 'https://mp.weixin.qq.com/s/_JCRYeo65c9CTklhqUJZBA', name: 'Â∑®ÁÉßËÑë-‰º∞ËÆ°Ê≤°Âá†‰∫∫ËÉΩÁúãÊáÇ:ÂÆûÁé∞treeÂëΩ‰ª§ - Êé¢Á¥¢‰Ω†DÁõòÁöÑÁßòÂØÜ'},
          {url: 'https://mp.weixin.qq.com/s/BFU-IHHg422aHZX-c0_3IQ', name: 'Âü∫‰∫éshiroÁöÑÊùÉÈôêËá™Âä®ÂΩïÂÖ•'},
          {url: '', name: ''},
          {url: 'https://mp.weixin.qq.com/s/gjpqdLBuMlvzkdY_qHI54A', name: 'ÂçóÂ§©Èó®‰∏äÔºå‰∏âÂçÉÂø†È≠ÇÂ•ãÂ≠§ÂãáÔºõÁ•≠ÊóóÂù°‰∏ãÔºå‰∏ÄËÖîÁÉ≠Ë°ÄÁÖßÈùíÂ±±'},
          {url: '', name: ''},
          {url: 'https://mp.weixin.qq.com/s/a9gXbNS_U3JMvzaaKvdkrA', name: '2020Âπ¥5ÊúàÔºåÊØîÁâπÂ∏ÅÂç≥Â∞ÜËøéÊù•Á¨¨‰∏âÊ¨°ÂáèÂçäÔºå‰∏∫‰ªÄ‰πàÊØîÁâπÂ∏Å‰ºöÂáèÂçä'},
          {url: 'https://mp.weixin.qq.com/s/O04kd9SIvZcKHIRpHVz8Bw', name: '‰∏çÂ∞èÂøÉÊï≤‰∫Ü rm -rf / ÂêéÂèçÂ∫îÊòØÊÄéÊ†∑ÁöÑÔºü'},
          {url: 'https://mp.weixin.qq.com/s/T-IMeuMTgwC7ZIpYAo2EEQ', name: 'ÊòüÈôÖÁ©øË∂äÁöÑÂÆåÂÖ®Ëß£Êûê'},
          {url: 'https://mp.weixin.qq.com/s/D0RA8dv3e0_oDTdiN8CK8w', name: 'Â•áËÆ∞ÔΩúÁîüÊ≠ªËçíÂéüË∑ØÔºå52Â§©È¶ñÊ¨°Âçï‰∫∫ÂÆåÊï¥Ê®™Á©øÂ§ßÁæåÂ°ò'},
          {url: '', name: ''},]
      }, {
        name: "ÂÆûÁî®Â∞èÂ∑•ÂÖ∑",
        custom: true,
        background: "22e674",
        tools: [
          {url: '.', name: '‰∏ªÈ°µ'},
          {url: './calendar', name: '‰∏áÂπ¥ÂéÜ'},
          {url: './format', name: 'JSON-Ê†ºÂºèÂåñ'},
          {url: "./security_password.html", name: "Â§çÊùÇÂØÜÁ†ÅÁîüÊàêÂô®"},
          {url: 'http://tool.oschina.net/codeformat/xml', name: 'ÂÖ∂‰ªñ‰ª£Á†ÅÊ†ºÂºèÂåñ'},
          {url: 'http://cron.qqe2.com/', name: 'Âú®Á∫øCronË°®ËææÂºèÁîüÊàêÂô®'},
          {url: 'http://tool.chinaz.com/tools/unicode.aspx', name: 'UnicodeÁºñÁ†Å'},
          {url: 'http://www.bejson.com/xml2json/', name: 'XML 2 JSON'},
          {url: './json2bean', name: 'JSON 2 BEAN'},
          {url: './encrypt/encrypt.html', name: 'AES-DES'},
          {url: 'http://tool.chacuo.net/cryptaes', name: 'AES-2'},
          {url: './encrypt/encrypt2.html', name: 'ÂìàÂ∏åÊï£Âàó'},
          {url: 'https://tool.lu/hexconvert/', name: 'ËøõÂà∂ËΩ¨Êç¢'},
          {url: './encrypt/encrypt3.html', name: 'BASE64ÁºñÁ†Å'},
          {url: './encrypt/encrypt4.html', name: 'ÂõæÁâáËΩ¨base64'},
          {url: 'https://c.runoob.com/front-end/59/', name: 'ÂõæÁâáBASE64ÁºñÁ†Å'},
          {url: 'https://cli.im/', name: '‰∫åÁª¥Á†ÅÁîüÊàêÂô®'},
          {url: 'http://www.jq22.com/textDifference', name: 'Show diff'},
          {url: 'http://tool.oschina.net/jscompress/', name: 'js/css compresss'},
          {url: 'http://imgbase64.duoshitong.com/', name: 'ÂõæÁâá base64 ‰∫íËΩ¨'},
          {url: 'https://www.ip.cn', name: 'IP ÂüüÂêçÂú∞ÂùÄÊü•ËØ¢'},
          {url: 'https://github.com/qjyoung', name: 'qjyoung-github'},
          {url: 'https://blog.csdn.net/qq_33303700', name: 'qjyoung-CSDN'},
          {url: 'https://www.bootcdn.cn/', name: 'ÂºÄÊ∫êÈ°πÁõÆCDN'},
          {url: 'http://www.yuangongju.com/css3button', name: 'css-button'},
          {url: 'http://www.jq22.com/webqd5122', name: 'css-input'},
          {url: 'https://www.processon.com/', name: 'processon'},
          {url: 'http://www.txttool.com/WenBen_Sort4.asp', name: 'Âú®Á∫øÂ≠óÂÖ∏ÊéíÂ∫è'},
          {url: 'https://wantwords.net/', name: 'wantwords'},
          {url: 'https://tool.ip138.com/rgbhex/', name: 'Âú®Á∫øÈ¢úËâ≤ÂÄºËΩ¨Êç¢'},
        ]
      }],
      countdown: {
        name: "ÂÄíËÆ°Êó∂",
        background: "FFE56F",
        date: new Date(),
        lunar: new Lunar(new Date()),
        time: '',
        today: -1,
        _festivals: [],
        tools: [{
          date: "xxxx-09-16",
          desc: "ÂÖ¨ÂéÜÁîüÊó•",
          custom: true
        }, {
          isLunar: true,
          date: "xxxx-ÂÖ´-ÂçÅ‰∫å",
          desc: "ÂÜúÂéÜÁîüÊó•",
          custom: true
        }]
      },
      holidays: [],
      date: "",
      desc: "",
      readme: `‚≠êÂ∑•ÂÖ∑Êùø&ÂÄíËÆ°Êó∂ÂàóË°®‚≠êÔ∏è

Ê≠§Â∑•ÂÖ∑ÊùøÂèØÊñπ‰æøÂàÜÁ±ªÊî∂Á∫≥Â∑•‰Ωú‰∏≠Â∏∏Áî®ÁöÑÂú®Á∫øÂ∑•ÂÖ∑ÊàñÂèÇËÄÉËµÑÊñôÈìæÊé•

Â¶Ç‰∏ãÊâÄÁ§∫Ôºå‰∏çÂêåËâ≤Âùó‰ª£Ë°®‰∫Ü‰∏çÂêåÁöÑÂ∑•ÂÖ∑ÁªÑÔºåÊØèÁªÑÂèØÊ∑ªÂä†Ëã•Âπ≤Â≠êÈ°π(ÁΩëÈ°µÈìæÊé•)
Èº†Ê†áÁßªÂä®Âà∞‰∏çÂêåÂå∫ÂüüÂç≥ÂèØÂî§Âá∫ÂêÑËá™ÁöÑÊìç‰ΩúÊåâÈíÆÂíåËæìÂÖ•Ê°Ü

‰ΩøÁî®ÊåáÂçóÔºö
‚ë† ÊØèÁªÑÂè≥‰∏ãËßí‚ûïÊåâÈíÆÔºåÂèØÂú®ËØ•ÁªÑÂêéËøΩÂ¢ûÊñ∞Â∑•ÂÖ∑ÁªÑ
‚ë° ÊØèÁªÑÂè≥‰∏äËßí‚ùåÊåâÈíÆÔºåÂèØÂ∞ÜËØ•ÁªÑÂà†Èô§ÔºåÂêåÊó∂ÁªÑÂÜÖÊâÄÊúâÊù°ÁõÆÈÉΩÂ∞ÜË¢´ÁßªÈô§
‚ë¢ ÊØèÁªÑÁöÑÊ†áÈ¢òÈÉΩÂèØÂÆûÊó∂ÁºñËæëÔºåÂè™ÈúÄË¶ÅÁßªÂä®ÂÖâÊ†áÂà∞Áõ∏Â∫î‰ΩçÁΩÆ

Â≠êÈ°πÊìç‰ΩúÔºö
‚ë£ ÊåâËæìÂÖ•Ê°ÜÊèêÁ§∫ÔºåÊ≠£Á°ÆËæìÂÖ•Êï∞ÊçÆÂêéÂõûËΩ¶ÊàñÁÇπÂáª‚úÖÊåâÈíÆÂç≥ÂèØÊñ∞Â¢ûÂ≠êÈ°π
‚ë§ ÊØè‰∏™Â≠êÈ°πÂè≥‰æßÂêåÊ†∑Êúâ‚ùåÊåâÈíÆÔºåÂèØÂ∞ÜËØ•Êù°ÁõÆÂà†Èô§

‚ë• Â∑•ÂÖ∑ÁªÑÂèäÂÖ∂Â≠êÈ°πÂùáÂèØËá™Áî±ÊãñÊãΩÂèòÊç¢‰ΩçÁΩÆÔºåÂ∑•ÂÖ∑ÁªÑÂèØ‰∏§‰∏§ÂêàÂπ∂ÔºåÂ≠êÈ°πÂèØË∑®ÁªÑÁßªÂä®

‚ë¶ ÂÄíËÆ°Êó∂ÂàóË°®ÂêåÁêÜÔºå‰∏çÂèØÁßªÂä®„ÄÇÂú®ÁîµËÑë‰∏äÁÇπÂáªÊ†áÈ¢òÂèØËé∑ÂèñÂÄíËÆ°Êó∂ÂàóË°®Êà™Âõæ

‚ëß üéØüéØüéØÊ≠§Â∑•ÂÖ∑ÊòØ‰∏Ä‰∏™Á∫ØÊú¨Âú∞Â∑•ÂÖ∑ÔºåÊâÄÊúâÊñ∞Â¢ûÊï∞ÊçÆÈÉΩÂè™‰øùÂ≠òÂú®Êú¨Âú∞ÔºåÊîæÂøÉ‰ΩøÁî®

ÁÇπÂáªÁ°ÆËÆ§‰∏ãÊ¨°ÊâìÂºÄ‰∏çÂÜçÊèêÁ§∫

üåπüåπüåπüåπüåπüåπüåπüåπüåπüåπüåπüåπüåπüåπüåπüåπüåπ
          `
    },
    mounted() {
      this.handleVersion();

      let doc = this.toolGroups[0];
      this.toolGroups = this.getFromLocal(StoreKey.ToolGroups, this.toolGroups);
      this.toolGroups[0] = doc;

      this.countdown.tools = this.getFromLocal(StoreKey.Countdown, this.countdown).tools.filter(item => {
        return item.custom
      });

      this.reloadCountDown();

      this.updateTime();
      setInterval(this.updateTime, 1000);

    },
    methods: {
      handleVersion() {
        let currentVersion = 3;

        let lastVersion = -1;
        let _version = localStorage.getItem(StoreKey.Version);
        if (_version) {
          lastVersion = parseInt(_version);
        }
        if (lastVersion < 3) { // replace title to name
          let _groups = localStorage.getItem(StoreKey.ToolGroups);
          _groups && localStorage.setItem(StoreKey.ToolGroups, _groups.replaceAll("\"title\"", "\"name\""));
        }
        localStorage.setItem(StoreKey.Version, currentVersion.toString())

        setTimeout(() => {
          if (this.readme !== localStorage.getItem(StoreKey.Readme)) {
            confirm(this.readme) && localStorage.setItem(StoreKey.Readme, this.readme);
          }
        }, 177);
      },
      getFromLocal(key, field) {
        let cache = JSON.parse(localStorage.getItem(key));
        if (cache != null) {
          return cache;
        }
        return field;
      },
      updateTime() {
        let now = new Date();
        this.countdown.time = [this.paddingLeft(now.getHours()), this.paddingLeft(now.getMinutes()), this.paddingLeft(now.getSeconds())].join(':');
        let today = now.getDate();
        if (this.countdown.today === today) {
          return
        }
        this.reloadCountDown();
        this.countdown.today = today;
      },
      newCountdown() {
        let isLunar = false;
        let year = 'xxxx', month = 'xx', day = '';
        if (!this.desc || this.desc.length === 0) {
          notice("ËØ∑Â°´ÂÜôÊèèËø∞");
          return;
        }
        if (/[\u4E00-\u9FA5]/.test(this.date)) {
          isLunar = true;
          let strings = this.date.split("Âπ¥");
          if (strings.length > 2) {
            notice("Êó•ÊúüÈîôËØØ");
            return;
          }
          if (strings.length === 2) {
            year = strings[0] === '' ? year : strings[0];
          }
          if (year !== 'xxxx' && parseInt(year) > 2050) {
            notice("ÊúÄÂ§ßÊîØÊåÅÂπ¥‰ªΩ2050");
            return;
          }
          if (!/^xxxx$|^[1-9]\d{3}$/.test(year)) {
            notice("Âπ¥‰ªΩÈîôËØØ");
            return;
          }

          strings = strings[strings.length - 1].split("Êúà");
          if (strings.length > 2) {
            notice("ÂÜúÂéÜÊúà‰ªΩÈîôËØØ");
            return;
          }

          if (strings.length === 2) {
            month = strings[0] === '' ? month : strings[0];
            let _month = month;
            if (_month !== 'xx') {
              _month = _month.replace('Èó∞', '');
              if (_month.length > 1
                || _month[0] === '‰∏Ä'
                || XXXUnits.indexOf(_month[0]) < 0
                && _month[0] !== 'Ê≠£'
                && _month[0] !== 'ÂÜ¨'
                && _month[0] !== 'ËÖä') {
                notice("ÂÜúÂéÜÊúà‰ªΩÈîôËØØ(Ê≠£Êúà‰∫åÊúà...ÂçÅÊúàÂÜ¨ÊúàËÖäÊúà)");
                return;
              }
            }
          }
          day = strings[strings.length - 1];
        } else {
          let strings = this.date.split('-');
          let length = strings.length;
          if (length > 3 || length === 0) {
            notice("Êó•ÊúüÈîôËØØ");
            return;
          }
          day = strings[length - 1];
          if (length > 1) {
            month = strings[length - 2];
          }
          if (length > 2) {
            year = strings[length - 3];
          }
          if (!/^xxxx$|^[1-9]\d{3}$/.test(year)) {
            notice("Âπ¥‰ªΩÈîôËØØ");
            return;
          }
          if (!/^xx$|^1[0-2]$|^0?[1-9]$/.test(month)) {
            notice("ÂÖ¨ÂéÜÊúà‰ªΩÈîôËØØ");
            return
          }
          if (!/^(0?[1-9]$|^[1-2][0-9]$|^3[0-1]$)/.test(day)) {
            notice("Êó•ÊúüÈîôËØØ");
            return
          }
        }
        this.countdown.tools.push({
          date: [year, month, day].join('-'),
          isLunar: isLunar,
          desc: this.desc,
          url: undefined,
          custom: true
        });
      },
      reloadCountDown() {
        let items = this.countdown.tools;
        let todayDate = new Date();
        let thisYear = todayDate.getFullYear();
        let thisMonth = todayDate.getMonth();
        let thisDay = todayDate.getDate();
        todayDate = new Date(thisYear, thisMonth, thisDay);
        this.countdown.date = todayDate;
        this.countdown.lunar = new Lunar(todayDate);

        this.countdown._festivals = [];
        let _festivals = festivals(this.countdown.lunar);
        if (_festivals.length > 0) {
          _festivals.map(value => this.countdown._festivals.push(value.festival.replace('*', '').replace('.', '')));
        }
        this.findHolidays();

        thisMonth += 1;

        let lastDiff = 0;
        let maxDescWidth = 0, maxDiffWidth = 0;
        for (let i = 0; i < items.length; i++) {
          let item = items[i];
          if (!item.date) {
            item.diff = lastDiff + 0.00001;
            continue
          }

          let strings = item.isLunar && item.lunarDate ? item.lunarDate.split('-') : item.date.split('-');
          let autoYear = strings[0] === 'xxxx', autoMonth = strings[1] === 'xx';
          let thatYear = autoYear ? thisYear : parseInt(strings[0]);
          let thatMonth = strings[1], thatDay = strings[2];

          let thatDate, name = '';
          item.hide = false;
          if (item.isLunar) {
            let found = false;
            this.find(lunar => {
              if ((lunar.chineseMonth === thatMonth || autoMonth) && lunar.chineseDay === thatDay) {
                found = true;
                thatDate = new Date(lunar.date.getFullYear(), lunar.date.getMonth(), lunar.date.getDate());
                if (item.isLunar) {
                  name += ' ' + lunar.chineseMonth + 'Êúà' + lunar.chineseDay;
                }
              }
              return found
            }, !autoYear && thatYear > thisYear ? thatYear : undefined);
            if (!found) {
              if (!autoYear) {
                items.splice(i, 1);
                i--;
                continue;
              }
              item.hide = true;
            }
          } else {
            thatDay = parseInt(thatDay);
            if (autoMonth) {
              thatMonth = thisMonth;
              if (thisDay > thatDay && (autoYear || thisMonth !== 12)) {
                thatMonth = (thisMonth + 1) % 12;
                thatYear = thisYear + (thatMonth === 1 ? 1 : 0);
              }
            } else {
              thatMonth = parseInt(thatMonth);
              if (autoYear && (thisMonth > thatMonth || thisMonth === thatMonth && thisDay > thatDay)) {
                thatYear += 1;
              }
            }
            thatDate = new Date(thatYear, thatMonth - 1, thatDay);
          }

          if (!item.hide) {
            let diff = this.calDiff(thatDate);
            if (diff === 0 && item.custom) {
              this.countdown._festivals.push(item.desc);
            } else if (diff < 0) {
              items.splice(i, 1);
              i--;
              continue;
            }
            let descWidth = `<strong>${item.desc}</strong>`.visualLength();
            maxDescWidth = descWidth > maxDescWidth ? descWidth : maxDescWidth;
            let diffWidth = (diff + 'Â§©').visualLength();
            maxDiffWidth = diffWidth > maxDiffWidth ? diffWidth : maxDiffWidth;

            item.diff = lastDiff = diff;
            item.time = this.formatDate(thatDate).replace(thisYear + "-", "") + name;
          } else {
            item.diff = 0;
          }
        }
        this.sortAndSetStyle(items, maxDiffWidth + 1, maxDescWidth + 1);
        localStorage.setItem(StoreKey.Countdown, JSON.stringify(this.countdown));
      },
      findHolidays() {
        this.holidays = [];
        let thisYear = new Date().getFullYear();
        let theWinterSolsticeDay, lastWinterSolsticeDay;
        this.find(lunar => {
          festivals(lunar).forEach(each => {
            if (!theWinterSolsticeDay && each.festival.indexOf("ÂÜ¨Ëá≥.") >= 0) {
              theWinterSolsticeDay = new Date(lunar.date);
            }

            let isHoliday = each.festival.indexOf("*") > 0;
            let isKeySolarTermsDay = each.festival.indexOf(".") > 0;
            if (isHoliday || isKeySolarTermsDay) {
              this.holidays.push({
                custom: false,
                time: this.formatDate(lunar.date).replace(thisYear + "-", '') + ' ' + lunar.chineseMonth + 'Êúà' + lunar.chineseDay,
                desc: `<span style="background-color:${isHoliday ? '#ccffcc' : ''}">${each.festival.replace('*', '').replace('.', '')}</span>`,
                diff: this.calDiff(lunar.date)
              });
            }
          })
        });

        // nine periods after winter solstice day
        let date = new Date();
        let j = 0;
        out:for (; j < 81; j++) {
          let lunar = new Lunar(date);
          let _festivals = festivals(lunar);
          for (let i = 0; i < _festivals.length; i++) {
            if (_festivals[i].festival.indexOf("ÂÜ¨Ëá≥.") >= 0) {
              lastWinterSolsticeDay = date;
              break out;
            }
          }
          date.setDate(date.getDate() - 1);
        }

        let periodIndex = parseInt(j / 9);
        if (lastWinterSolsticeDay) {
          this.countdown._festivals.push(`${XXXUnits[periodIndex + 1]}‰πùÁ¨¨${j % 9 + 1}Â§©`);
        }

        let total = 3
        let winterSolsticeDay = lastWinterSolsticeDay;
        while (total-- > 0) {
          if (!winterSolsticeDay) {
            periodIndex = 0;
            winterSolsticeDay = theWinterSolsticeDay;
          }
          if (++periodIndex < 9) {
            if (total === 0 && periodIndex > 2) {
              periodIndex = 8;
            }
            let date1 = new Date(winterSolsticeDay);
            date1.setDate(date1.getDate() + 9 * periodIndex);
            let lunar = new Lunar(date1);
            this.holidays.push({
              custom: false,
              time: this.formatDate(lunar.date).replace(thisYear + "-", '') + ' ' + lunar.chineseMonth + 'Êúà' + lunar.chineseDay,
              desc: `${XXXUnits[periodIndex + 1]}‰πù`,
              diff: this.calDiff(lunar.date)
            });
          } else {
            total++
            winterSolsticeDay = undefined;
          }
        }
        this.sortAndSetStyle(this.holidays, '365Â§©'.visualLength() + 1, '<strong>ÂõΩÂ∫ÜËäÇ</strong>'.visualLength() + 1);
      },
      find(consumer, year, findDays) {
        findDays = findDays || 386;
        let date = year ? new Date(year, 0, 1) : new Date();
        for (let j = 0; j < findDays; j++) {
          let lunar = new Lunar(date);
          if (consumer(lunar)) {
            break
          }
          date.setDate(date.getDate() + 1);
        }
      },
      formatDate(date) {
        return [date.getFullYear(), this.paddingLeft(date.getMonth() + 1), this.paddingLeft(date.getDate())].join('-');
      },
      paddingLeft(num) {
        num = parseInt(num);
        return num < 10 ? '0' + num : num;
      },
      calDiff(that) {
        let today = new Date();
        today = new Date(today.getFullYear(), today.getMonth(), today.getDate());
        return (new Date(that.getFullYear(), that.getMonth(), that.getDate()) - today) / 86400000
      },
      sortAndSetStyle(items, diffWidth, descWidth) {
        items.sort(function (a, b) {
          return a.diff - b.diff;
        });
        items.forEach(item => {
          item.descStyle = {width: `${descWidth}px`};
          item.diffStyle = {width: `${diffWidth}px`, color: item.diff === 0 ? 'red' : 'blue'};
          item.diffShow = item.diff === 0 ? '‰ªäÂ§©' : item.diff + 'Â§©';
        })
      }
    },
    watch: {
      toolGroups: {
        handler(groups) {
          localStorage.setItem(StoreKey.ToolGroups, JSON.stringify(groups));
        },
        deep: true
      },
      "countdown.tools.length": {
        handler(val) {
          this.reloadCountDown();
        }
      }
    }
  })
</script>
</html>
